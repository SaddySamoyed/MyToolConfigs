set fish_greeting
echo "ğŸŸ Welcome back, QL! Hail to the Elden Lord! "

function fish_prompt
    echo -n (prompt_pwd) ' â–¶ '
end

if test -n "$WSL_DISTRO_NAME"
    echo "Running in WSL: $WSL_DISTRO_NAME"
    cd ~/documents
end
if status is-interactive
    # Commands to run in interactive sessions can go here
end


function accept_or_expand --description "Smart Tab: expand on first, accept on second"
    set cursor_pos (commandline -C)
    set current_buffer (commandline)
    set before_cursor (string sub -l $cursor_pos -- $current_buffer)

    if test "$before_cursor" = "$__last_tab_buffer"
        # ç¬¬äºŒæ¬¡ Tabï¼Œç›´æ¥æ¥å—è¡¥å…¨å»ºè®®
        commandline -f accept-autosuggestion
    else
        # ç¬¬ä¸€æ¬¡ Tabï¼Œæ˜¾ç¤ºå€™é€‰é¡¹
        set -g __last_tab_buffer $before_cursor
        commandline -f complete
    end
end

# å¼ºåˆ¶ Tab åªæ¥å—è‡ªåŠ¨è¡¥å…¨ï¼Œä¸å¾ªç¯å€™é€‰é¡¹
bind \t accept_or_expand

# control+c -> undo
bind \cz undo


# ===============================
# Sublime Text CLI æ·»åŠ åˆ° PATH
# ===============================
set -gx PATH "/Applications/Sublime Text.app/Contents/SharedSupport/bin" $PATH

# ===============================
# Conda åˆå§‹åŒ–ï¼ˆfish ç‰ˆæœ¬ï¼‰
# ===============================
if test -f /Users/fanqiulin/miniconda3/bin/conda
    # Conda for fish: try using hook
    eval (/Users/fanqiulin/miniconda3/bin/conda shell.fish hook)
else if test -f /Users/fanqiulin/miniconda3/etc/profile.d/conda.sh
    # Fallback: manually add bin
    set -gx PATH "/Users/fanqiulin/miniconda3/bin" $PATH
end

# ===============================
# alias
# ===============================
alias ls='ls -G'

# ===============================
# Emacs å¿«æ·å‡½æ•°
# ===============================
function e
    command emacs $argv &
end




function emoji
    if test $status -ne 0
        printf "\U0001F972\n"
    else
        printf "\U0001F600\n"
    end
end

function fish_prompt
    set emoji_output (emoji)
    set_color green
    echo -n "$emoji_output" "[$USER] "
    set_color blue
    echo -n (prompt_pwd)
    set_color normal
    echo -n " \$ "
end




